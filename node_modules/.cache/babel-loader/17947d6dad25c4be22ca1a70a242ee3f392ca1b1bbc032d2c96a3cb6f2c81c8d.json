{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// @ is an alias to /src\nimport { Chart } from 'highcharts-vue';\nimport axios from \"axios\";\nimport { useToast } from \"vue-toastification\";\nexport default {\n  name: 'Home',\n  components: {},\n  data: () => ({\n    show: false,\n    objs: [],\n    toast: useToast(),\n    loading: false\n  }),\n  created() {\n    this.loadObjs();\n    this.ready();\n    if (!this.$store.state.access) {\n      this.goTo(\"login\", null);\n    }\n  },\n  methods: {\n    loadObjs() {\n      var that = this;\n      // this.loading =true\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/obj_ev`,\n        method: 'GET',\n        headers: {\n          'Content-type': 'application/json',\n          'Authorization': `JWT ${this.$store.state.access}`\n        }\n      }).then(res => {\n        that.objs = res.data, that.loading = false;\n      });\n    },\n    AddObj() {\n      var that = this;\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/` + this.$store.state.cuser.slug + `/add`,\n        data: {\n          title: that.objname\n        },\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'Authorization': `JWT ${this.$store.state.access}`\n        }\n      }).then(res => {\n        console.log(res);\n        let r = this.$router.resolve({\n          name: 'Home',\n          params: {}\n        });\n      });\n    },\n    removeObj(title) {\n      var that = this;\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/` + this.$store.state.cuser.slug + `/remove`,\n        data: {\n          title: title\n        },\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'Authorization': `JWT ${this.$store.state.access}`\n        }\n      }).then(res => {\n        console.log(res);\n        let r = this.$router.resolve({\n          name: 'Home',\n          params: {}\n        });\n      });\n    },\n    goTo(name, params) {\n      let r = this.$router.resolve({\n        name: name,\n        params: params\n      });\n      this.$router.push(r);\n    },\n    ready: function () {\n      this.loadObjs();\n      this.interval = setInterval(function () {\n        this.loadObjs();\n      }.bind(this), 1000);\n    }\n  }\n};","map":{"version":3,"names":["Chart","axios","useToast","name","components","data","show","objs","toast","loading","created","loadObjs","ready","$store","state","access","goTo","methods","that","url","backendUrl","method","headers","then","res","AddObj","cuser","slug","title","objname","console","log","r","$router","resolve","params","removeObj","push","interval","setInterval","bind"],"sources":["/home/oliverqa/Documents/engee_frontend/src/views/Home.vue"],"sourcesContent":["<template>\n     <div v-if=\"loading\" class=\"preloader\">\n    <div class=\"preloader__image\">\n    </div>\n</div>\n    <body style=\"height: 100%\" class=\"bg-default\">\n  <!-- Navbar -->\n\n  <!-- Main content -->\n  <div class=\"main-content\">\n    <!-- Header -->\n    <div class=\"header bg-gradient-primary py-7 py-lg-8 pt-lg-9\">\n      <div class=\"container\">\n        <div class=\"header-body text-center mb-7\">\n          <div class=\"row justify-content-center\">\n            <div class=\"col-xl-5 col-lg-6 col-md-8 px-5\">\n              <h1 class=\"text-white\">Ласкаво просимо!</h1>\n              <p class=\"text-lead text-white\">Для додавання об'єкту в систему мониторингу, натисніть кнопку нижче</p>\n              <button class=\"btn btn-dark\" @click.prevent=\"show= true\">Додати об'єкт</button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"separator separator-bottom separator-skew zindex-100\">\n        <svg x=\"0\" y=\"0\" viewBox=\"0 0 2560 100\" preserveAspectRatio=\"none\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n          <polygon class=\"fill-default\" points=\"2560 0 2560 100 0 100\"></polygon>\n        </svg>\n      </div>\n    </div>\n    <!-- Page content -->\n    <div class=\"container \">\n      <div class=\"row\">\n<div  data-aos=\"slide-right\" data-aos-delay=\"200\" v-for=\"obj in objs\" :key=\"obj.id\" style=\"margin-right: 3%\">\n              <div v-if=\"!obj.alarm\"  class=\"card bg-gradient-info\" style=\"border-radius: 20px;color: white\">\n                <!-- Card body -->\n\n                <div class=\"card-body px-lg-5 py-lg-5\" @click.prevent=\"goTo('obj_page',{slug:obj.slug})\" >\n                  <div class=\"row\">\n                    <div class=\"col\" >\n                      <div class=\"card-title text-uppercase  mb-0\">Об'єкт</div>\n                      <div class=\"card-title text-uppercase  mb-0\">{{ obj.title }}</div>\n                      <span class=\"h2 font-weight-bold mb-0\">{{temp}}</span>\n                    </div>\n<!--                    <div class=\"col-auto\">-->\n<!--                      <div class=\"icon icon-shape bg-gradient-red text-white rounded-circle shadow\">-->\n<!--                        <i class=\"ni ni-active-40\"></i>-->\n<!--                      </div>-->\n<!--                    </div>-->\n                  </div>\n                </div>\n                                                            <button class=\"btn\" style=\"color:white;float: right\" @click.prevent=\"removeObj(obj.title)\">Видалити</button>\n                  </div>\n\n              <div v-else  class=\"card bg-gradient-danger\" style=\"border-radius: 20px;color: white\">\n                <!-- Card body -->\n\n                <div class=\"card-body px-lg-5 py-lg-5\" @click.prevent=\"goTo('obj_page',{slug:obj.slug})\" >\n                  <div class=\"row\">\n                    <div class=\"col\" >\n                      <div class=\"card-title text-uppercase  mb-0\">Объект</div>\n                      <div class=\"card-title text-uppercase  mb-0\">{{ obj.title }}</div>\n                      <span class=\"h2 font-weight-bold mb-0\">{{temp}}</span>\n                    </div>\n<!--                    <div class=\"col-auto\">-->\n<!--                      <div class=\"icon icon-shape bg-gradient-red text-white rounded-circle shadow\">-->\n<!--                        <i class=\"ni ni-active-40\"></i>-->\n<!--                      </div>-->\n<!--                    </div>-->\n                  </div>\n                </div>\n                                                            <button class=\"btn\" style=\"color: white;float: right\" @click.prevent=\"removeObj(obj.title)\">Видалити</button>\n                  </div>\n\n              </div>\n            </div>\n          </div>\n              </div>\n\n\n\n\n      <vue-final-modal  v-model=\"show\" :drag=\"true\" :resize=\"true\" :keep-changed-style=\"true\" :esc-to-close=\"true\"  :resize-directions=\"['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl']\"\n classes=\"modal-container\" content-class=\"modal-content\">\n<font-awesome-icon  class=\"modal__close\" @click=\"show = false\" :icon=\"['fas', 'times']\"  />\n           <input v-model=\"objname\" type=\"text\" class=\"form-control\" placeholder=\"Ip адрес обьекта...\">\n            <button class=\" btn btn-primary\" @click.prevent=\"AddObj()\"> Додати</button>\n    </vue-final-modal>\n\n\n\n\n\n<footer class=\"py-5\" id=\"footer-main\">\n    <div class=\"container\">\n      <div class=\"row align-items-center justify-content-xl-between\">\n        <div class=\"col-xl-6\">\n          <div class=\"copyright text-center text-xl-left text-muted\">\n            &copy; 2024 <a href=\"https://github.com/elaiviaien\" class=\"font-weight-bold ml-1\" target=\"_blank\">elaiviaien</a>\n          </div>\n        </div>\n        <div class=\"col-xl-6\">\n          <ul class=\"nav nav-footer justify-content-center justify-content-xl-end\">\n            <li class=\"nav-item\">\n              <a  class=\"nav-link\" target=\"_blank\">elaiviaien</a>\n            </li>\n            <li class=\"nav-item\">\n              <a href=\"https://t.me/liumphis\" class=\"nav-link\" target=\"_blank\">Співпраця</a>\n            </li>\n            <li class=\"nav-item\">\n              <a href=\"http://hiker.elaiviaien.com\" class=\"nav-link\" target=\"_blank\">Сайт для туризму</a>\n            </li>\n            <li class=\"nav-item\">\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </footer>\n    </body>\n\n\n\n\n</template>\n\n<script>\n// @ is an alias to /src\nimport {Chart} from 'highcharts-vue'\nimport axios from \"axios\";\nimport {useToast} from \"vue-toastification\";\n\nexport default {\n  name: 'Home',\n  components: {\n\n  },\n   data:()=>(\n           {\n             show:false,\n             objs:[],\n                     \t\t\ttoast : useToast(),\nloading:false\n           }),\n  created(){\nthis.loadObjs()\n        this.ready()\n\nif (!this.$store.state.access){\n  this.goTo(\"login\",null)\n}\n  },\n  methods:{\n    loadObjs(){\n      var that = this;\n      // this.loading =true\n       axios({url: this.$store.state.backendUrl+`api/v1/obj_ev`, method: 'GET', headers: {\n                            'Content-type': 'application/json',\n                            'Authorization':`JWT ${this.$store.state.access}`\n\t\t\t\t\t}\n\t\t\t\t\t\t,}).then(res=>{that.objs =res.data, that.loading = false})\n\n    },\n    AddObj(){\n      var that = this;\n       axios({url: this.$store.state.backendUrl+`api/v1/`+this.$store.state.cuser.slug+`/add`,data:{title:that.objname}, method: 'POST', headers: {\n                            'Content-type': 'application/json',\n                            'Authorization':`JWT ${this.$store.state.access}`\n\t\t\t\t\t}\n\t\t\t\t\t\t,}).then(res=>{console.log(res)\n              let r = this.$router.resolve({\n\t\t\t\t\t\t\t\tname: 'Home',params: {}\n\t\t\t\t\t\t\t})\n            })\n\n    },\n    removeObj(title){\n      var that = this;\n       axios({url: this.$store.state.backendUrl+`api/v1/`+this.$store.state.cuser.slug+`/remove`,data:{title:title}, method: 'POST', headers: {\n                            'Content-type': 'application/json',\n                            'Authorization':`JWT ${this.$store.state.access}`\n\t\t\t\t\t}\n\t\t\t\t\t\t,}).then(res=>{console.log(res)\n           let r = this.$router.resolve({\n\t\t\t\t\t\t\t\tname: 'Home',params: {}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\n    },\n     goTo(name,params) {\n        let r = this.$router.resolve({\n\t\t\t\t\t\t\t\tname: name,params: params\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tthis.$router.push(r)\n\n      },\n        ready: function () {\n    this.loadObjs();\n    this.interval = setInterval(function () {\n      this.loadObjs();\n    }.bind(this), 1000);\n  },\n  },\n\n}\n</script>\n<style scoped lang=\"scss\">\n  .col-xl-8{\n margin-left: auto;\n    margin-right: auto;  }\n  :deep(.modal-container) {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.card{\n  display: inline-block;\n  margin: 2%;\n  font-weight: bold;\n  cursor: pointer;\n  color:grey;\n}\n  :deep(.modal-container) {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.card:hover{\n  color:black;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n:deep(.modal-content) {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  max-height: 70%;\n  margin: 0 1rem;\n  padding: 1rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 20px;\n    margin-top:auto;\n    margin-bottom: auto;\n}\n.modal__title {\n  margin: 0 2rem 0 0;\n  font-size: 1.5rem;\n  font-weight: 700;\n}\n.modal__content {\n  flex-grow: 1;\n  overflow-y: auto;\n}\n.modal__action {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n  padding: 1rem 0 0;\n}\n.modal__close {\n  position: absolute;\n  top: 2rem;\n  right: 2rem;\n    cursor: pointer;\n}\n .preloader {\n    position: fixed;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n    background: #fff;\n    z-index: 1001;\n       opacity: 50%;\n\n  }\n\n  .preloader__image {\n    position: relative;\n    top: 50%;\n    left: 50%;\n    width: 64px;\n    height: 64px;\n    margin-top: -32px;\n    margin-left: -32px;\n    background: url('../assets/Walk.gif') no-repeat 50% 50%;\n    /*расположение (url) изображения gif и др. параметры*/\n  }\n\n  .loaded_hiding .preloader {\n    transition: 0.3s opacity;\n    opacity: 0;\n  }\n#footer-main{\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}