{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport axios from \"axios\";\nimport { useToast } from \"vue-toastification\";\nexport default {\n  name: \"reset_password\",\n  props: ['uid', 'slug'],\n  data: () => ({\n    current_password: '',\n    new_password: '',\n    loading: false,\n    toast: useToast(),\n    msg: []\n  }),\n  methods: {\n    resetPassword() {\n      if (this.new_password === this.current_password) {\n        this.toast.error('Новий пароль не може співпадати зі старим');\n      } else {\n        const formData = new FormData();\n        formData.append(\"uid\", this.uid);\n        formData.append(\"token\", this.slug);\n        formData.append(\"new_password\", this.new_password);\n        formData.append(\"current_password\", this.current_password);\n        this.loading = true;\n        axios({\n          url: this.$store.state.backendUrl + `auth/users/set_password/`,\n          data: formData,\n          method: 'POST',\n          headers: {\n            'Content-type': 'application/json'\n          }\n        }).then(response => {\n          console.log(response);\n          const formData1 = new FormData();\n          formData1.append(\"uid\", this.uid);\n          formData1.append(\"token\", this.slug);\n          formData1.append(\"new_password\", this.new_password);\n          this.loading = true;\n          axios({\n            url: this.$store.state.backendUrl + `auth/users/reset_password_confirm/`,\n            data: formData1,\n            method: 'POST',\n            headers: {\n              'Content-type': 'application/json'\n            }\n          }).then(response => {\n            console.log(response);\n            this.loading = false;\n            this.toast.success('Пароль змінено');\n            let r = this.$router.resolve({\n              name: ' Home' // put your route information in\n            });\n            this.$router.push(r);\n          }).catch(err => {\n            this.toast.error('Помилка!'), this.loading = false;\n          });\n        }).catch(err => {\n          this.toast.error('Ошибка'), this.loading = false;\n        });\n      }\n    },\n    validatePasssword(value) {\n      if (/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&_])[A-Za-z\\d@$!%*#?&_]{8,}/.test(value)) {\n        this.msg['password'] = '';\n      } else {\n        this.msg['password'] = 'В пароле должно быть минимум 8 символов: цыфры, буквы и спец.символы';\n      }\n    }\n  },\n  watch: {\n    new_password(value) {\n      // binding this to the data value in the email input\n      this.new_password = value;\n      this.validatePasssword(value);\n    }\n  }\n};","map":{"version":3,"names":["axios","useToast","name","props","data","current_password","new_password","loading","toast","msg","methods","resetPassword","error","formData","FormData","append","uid","slug","url","$store","state","backendUrl","method","headers","then","response","console","log","formData1","success","r","$router","resolve","push","catch","err","validatePasssword","value","test","watch"],"sources":["/home/oliverqa/Documents/engee_frontend/src/views/reset_password.vue"],"sourcesContent":["<template>\n     <div v-if=\"loading\" class=\"preloader\">\n    <div class=\"preloader__image\">\n    </div>\n</div>\n\n\n\n\n\n      <body class=\"bg-default\">\n  <!-- Navbar -->\n\n  <!-- Main content -->\n  <div class=\"main-content\">\n   <div class=\"header bg-gradient-primary py-7 py-lg-8 pt-lg-9\">\n      <div class=\"container\">\n        <div class=\"header-body text-center mb-7\">\n          <div class=\"row justify-content-center\">\n    <div class=\"container mtb\">\n        <div  style=\"margin-left: auto;margin-right: auto\">\n\t<div>\n\t\t<div data-aos=\"flip-up\" data-aos-delay=\"100\" data-aos-duration=\"1000\" >\n\t\t\t<form  @submit.prevent=\"resetPassword\">\n\t\t\t\t<h2 style=\"color: white\">Зміна паролю</h2>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<input type=\"password\" v-model=\"current_password\" name=\"full-name\" id=\"full-name\" class=\"form-control\" placeholder=\"Старий пароль\" required>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<input type=\"password\"  v-model=\"new_password\" name=\"password\" id=\"password\" class=\"form-control\" placeholder=\"Новий пароль\" required>\n                     <span v-if=\"msg.password\">{{msg.password}}</span>\n\n\t\t\t\t</div>\n\t\t\t\t<div >\n\n          <input  :disabled=\"msg['password']!=''\" class=\"btn btn-dark\" type=\"submit\" name=\"reset\" value=\"Змінити\">\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n\n\n\n\n    </div>\n  </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"separator separator-bottom separator-skew zindex-100\">\n        <svg x=\"0\" y=\"0\" viewBox=\"0 0 2560 100\" preserveAspectRatio=\"none\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n          <polygon class=\"fill-default\" points=\"2560 0 2560 100 0 100\"></polygon>\n        </svg>\n      </div>\n    </div>\n\n  </div>\n<footer class=\"py-5\" id=\"footer-main\">\n    <div class=\"container\">\n      <div class=\"row align-items-center justify-content-xl-between\">\n        <div class=\"col-xl-6\">\n          <div class=\"copyright text-center text-xl-left text-muted\">\n            &copy; 2024 <a href=\"https://github.com/elaiviaien\" class=\"font-weight-bold ml-1\" target=\"_blank\">elaiviaien</a>\n          </div>\n        </div>\n        <div class=\"col-xl-6\">\n          <ul class=\"nav nav-footer justify-content-center justify-content-xl-end\">\n            <li class=\"nav-item\">\n              <a  class=\"nav-link\" target=\"_blank\">elaiviaien</a>\n            </li>\n            <li class=\"nav-item\">\n              <a href=\"https://t.me/liumphis\" class=\"nav-link\" target=\"_blank\">Співпраця</a>\n            </li>\n            <li class=\"nav-item\">\n              <a href=\"http://hiker.elaiviaien.com\" class=\"nav-link\" target=\"_blank\">Сайт для туризму</a>\n            </li>\n            <li class=\"nav-item\">\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </footer>\n    </body>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport {useToast} from \"vue-toastification\";\n\nexport default {\n  name: \"reset_password\",\n  props:['uid','slug'],\n  data:()=>({\n    current_password:'',\n    new_password:'',\n    loading:false,\n\t  toast : useToast(),\n    msg:[]\n  }),\n  methods:{\n    resetPassword(){\n    \tif(this.new_password === this.current_password){\n    \t\tthis.toast.error('Новий пароль не може співпадати зі старим')\n\t\t}\n    \telse{\n      const formData = new FormData();\n                                      formData.append(\"uid\", this.uid)\n                                      formData.append(\"token\", this.slug)\n                                      formData.append(\"new_password\", this.new_password)\n                                      formData.append(\"current_password\", this.current_password)\n                                      this.loading =true\n              axios({url: this.$store.state.backendUrl+`auth/users/set_password/`,data:formData, method: 'POST',headers: {'Content-type': 'application/json',}}).then(response => {\n                console.log(response)\n\n\n\n                      const formData1 = new FormData();\n                                      formData1.append(\"uid\", this.uid)\n                                      formData1.append(\"token\", this.slug)\n                                      formData1.append(\"new_password\", this.new_password)\n                                      this.loading =true\n              axios({url: this.$store.state.backendUrl+`auth/users/reset_password_confirm/`,data:formData1, method: 'POST',headers: {'Content-type': 'application/json',}}).then(response => {\n                console.log(response)\n                this.loading= false\n                  this.toast.success('Пароль змінено')\n                \tlet r = this.$router.resolve({\n\t\t\t\t\t\t\t\tname: ' Home', // put your route information in\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tthis.$router.push(r)\n              }).catch(err => {this.toast.error('Помилка!'), this.loading = false\n})\n              }).catch(err => {\t\n\t\t\t\t  this.toast.error('Ошибка'),this.loading = false\n\t\t\t  })\n\n    }\n  },\n         validatePasssword(value){\n      if (/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&_])[A-Za-z\\d@$!%*#?&_]{8,}/.test(value))\n  {\n    this.msg['password'] = '';\n  } else{\n    this.msg['password'] = 'В пароле должно быть минимум 8 символов: цыфры, буквы и спец.символы';\n  }\n    },},\n          watch: {\n            new_password(value){\n                // binding this to the data value in the email input\n                this.new_password = value;\n                this.validatePasssword(value);\n            }}\n\n}\n</script>\n\n<style scoped>\n\n.form-detail{\n  text-align: center;\n}\n  .preloader {\n    position: fixed;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n    background: #fff;\n    z-index: 1001;\n        opacity: 50%;\n\n  }\n\n  .preloader__image {\n    position: relative;\n    top: 50%;\n    left: 50%;\n    width: 64px;\n    height: 64px;\n    margin-top: -32px;\n    margin-left: -32px;\n    background: url('../assets/Walk.gif') no-repeat 50% 50%;\n    /*расположение (url) изображения gif и др. параметры*/\n  }\n\n  .loaded_hiding .preloader {\n    transition: 0.3s opacity;\n    opacity: 0;\n  }\n\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}